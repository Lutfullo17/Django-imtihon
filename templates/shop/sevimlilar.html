<!doctype html>
<html lang="uz">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Sevimlilar</title>

<style>
:root{
  --bg:#0b1220;
  --panel:#0f1b33;
  --panel2:#0c1730;
  --text:#e8eefc;
  --muted:#a9b6d6;
  --line:rgba(255,255,255,.10);
  --primary:#4f8cff;
  --danger:#ff4d4d;
}
*{box-sizing:border-box;}
body{
  margin:0;
  font-family:system-ui, sans-serif;
  background:
    radial-gradient(1200px 700px at 10% 10%, rgba(79,140,255,.18), transparent 60%),
    radial-gradient(900px 600px at 90% 20%, rgba(255,255,255,.06), transparent 55%),
    var(--bg);
  color:var(--text);
}
a{color:inherit;text-decoration:none;}

.wrap{
  width:min(1100px, 92vw);
  margin:25px auto 40px auto;
}

.top{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
  padding:12px 14px;
  border:1px solid var(--line);
  border-radius:18px;
  background:rgba(255,255,255,.04);
}

h1{margin:0;font-size:20px;}

.btn{
  padding:10px 14px;
  border-radius:14px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.03);
  font-weight:700;
  cursor:pointer;
  transition:.2s;
}
.btn:hover{
  transform:translateY(-2px);
  background:rgba(255,255,255,.06);
}
.btn--danger{
  border-color:rgba(255,77,77,.3);
  background:rgba(255,77,77,.15);
}

.grid{
  margin-top:16px;
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(240px,1fr));
  gap:15px;
}

.card{
  border:1px solid var(--line);
  border-radius:18px;
  overflow:hidden;
  background:rgba(12,23,48,.45);
  box-shadow:0 10px 30px rgba(0,0,0,.3);
  transition:.2s;
}
.card:hover{
  transform:translateY(-3px);
}

.card img{
  width:100%;
  height:180px;
  object-fit:cover;
}

.body{
  padding:12px;
}

.title{
  margin:0 0 8px 0;
  font-size:15px;
}

.price{
  font-weight:900;
  margin-bottom:8px;
}

.actions{
  display:flex;
  justify-content:space-between;
  gap:8px;
}

.empty{
  margin-top:30px;
  text-align:center;
  color:var(--muted);
}
</style>
</head>

<body>

<div class="wrap">

  <div class="top">
    <h1>‚ù§Ô∏è Mening sevimlilarim</h1>
    <a class="btn" href="{% url 'home' %}">‚Üê Home</a>
  </div>

  {% if mahsulotlar %}
  <div class="grid">
    {% for p in mahsulotlar %}
    <div class="card">

      <a href="{% url 'mahsulot_detail' id=p.id %}">
        {% if p.image %}
          <img src="{{ p.image.url }}" alt="{{ p.title }}">
        {% else %}
          <img src="https://via.placeholder.com/300x200">
        {% endif %}
      </a>

      <div class="body">
        <h3 class="title">{{ p.title }}</h3>
        <div class="price">{{ p.price }} so'm</div>

        <div class="actions">
          <a class="btn" href="{% url 'mahsulot_detail' id=p.id %}">Ko‚Äòrish</a>

          <!-- Like toggle orqali olib tashlash -->
          <form method="post" action="{% url 'like_toggle' id=p.id %}">
            {% csrf_token %}
            <button class="btn btn--danger" type="submit">
              Olib tashlash
            </button>
          </form>
        </div>

      </div>

    </div>
    {% endfor %}
  </div>
  {% else %}
    <div class="empty">
      <h2>Sevimlilar bo‚Äòsh üò¢</h2>
      <p>Mahsulotlarga like bosganingizdan keyin shu yerda ko‚Äòrinadi.</p>
      <br>
      <a class="btn" href="{% url 'maxsulotlar' %}">Mahsulotlarni ko‚Äòrish</a>
    </div>
  {% endif %}

</div>

</body>
</html>
